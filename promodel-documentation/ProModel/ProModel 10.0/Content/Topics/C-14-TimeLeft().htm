<?xml version="1.0" encoding="utf-8"?>
<html MadCap:lastBlockDepth="6" MadCap:lastHeight="2951" MadCap:lastWidth="1466" xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head>
        <link href="../Resources/Stylesheets/TableStyles/Process_Table.css" rel="stylesheet" MadCap:stylesheetType="table" />
        <link href="../Resources/Stylesheets/PM-MM Stylesheet 2, linked.css" rel="stylesheet" />
    </head>
    <body>
        <h2 class="statements"><a name="C-14_4292047180_1107459"></a>TimeLeft()</h2>
        <h5 class="_valid_in">
            <MadCap:keyword term="Preemption logic:system functions:TIMELEFT();TIMELEFT()" />Preemption Logic System Function</h5>
        <h4 class="_rules_statements">Syntax samples</h4>
        <p class="Syntax_body">TimeLeft()</p>
        <p class="Syntax_body">Attr1=TimeLeft()</p>
        <h5 class="_rules_statements">Description</h5>
        <p class="p">Returns the time remaining if the preemption occurred during a <MadCap:keyword term="WAIT" />Wait statement. The value returned is in default time units and must be checked before any processing delay occurs since the value is updated whenever a preemption takes place. If the value is referred to later, it should be assigned to the entity’s attribute or to a local variable.</p>
        <p class="p">If several entities were preempted at a location, the value returned by the function to each entity will be taken from whichever entity has the largest time remaining in the Wait statement.</p>
        <p class="p">When no units are specified in the parentheses in this function, it returns the default time unit specified in the General Information dialog.</p>
        <h5 class="_valid_in">Valid In</h5>
        <p class="p">Operation logic defined as a preemptive process.</p>
        <h4 class="_rules_statements">Example</h4>
        <p class="p">
            <MadCap:conditionalText MadCap:conditions="PM-MM Conditionals.ServiceModel">An entity, Truck, may be preempted while being processed at a location, Bay_1.  When the Truck is preempted it should go to a location called Holding where it waits to return to Bay_1.  When it returns to Bay_1, processing for the Truck would continue where it left off when the Truck was preempted.  For example, if Bay_1 must process the Truck for a total of 40 minutes, but it only processed it for 35 minutes before the Truck was preempted, Bay_1 should process the Truck for only 5 additional minutes when it returns to Bay_1.  To do this, we assign the remaining process time using TimeLeft() to an attribute, Att1.  We also check Att1 at Bay_1 to determine if it is greater than 0 to know whether the Truck was executing the process for the first time or as a preempted entity.  Processing would be as follows:</MadCap:conditionalText>
            <MadCap:conditionalText MadCap:conditions="PM-MM Conditionals.MedModel">A patient (Patient) may be preempted while being treated at location Exam1. When a patient is preempted, he or she should go to location Wait_Rm and wait to return to Exam1. When the patient returns to Exam1, care should continue from where it left off when the patient was preempted. For example, if the care process was scheduled to last 10 minutes but only 2 minutes had been completed, the remaining care time of 8 minutes should be planned for the patient when care resumes. To do this, assign the remaining care time using TimeLeft() to an attribute, Att1. Check Att1 at Exam1 to determine if it is larger than 0 to know whether the patient was executing the process for the first time or as a preempted entity. Note that the preempted patient sent to the waiting room is assigned a priority of 99 to recapture Exam1. This is done to make certain that the patient has priority over other patients in the waiting room and does not simply take its place in line as the newest patient to arrive. The processing records should be as follows:</MadCap:conditionalText>
            <MadCap:conditionalText MadCap:conditions="PM-MM Conditionals.ProModel">You may preempt an entity called Gear while it processes at a location called Lathe1.  When you preempt the Gear, it should go to a location called Wait_Area where it waits to return to Lathe1.  When it returns to Lathe1, the lathe should continue processing the Gear from where it left off when you preempted the Gear.  For example, if Lathe1 must process the Gear for a total of 10 minutes, but it only processes for 8 minutes before you preempt the Gear, Lathe1 should process it for only 2 additional minutes when it returns to Lathe1.  To do this, we assign the remaining process time using TimeLeft() to an attribute, Att1.  We also check Att1 at Lathe1 to determine if it is greater than 0 to know whether the Gear was executing the process for the first time or as a preempted entity.  Processing should be as follows:</MadCap:conditionalText>
        </p>
        <p class="_rules" MadCap:conditions="PM-MM Conditionals.ServiceModel">
            <MadCap:conditionalText MadCap:conditions="PM-MM Conditionals.ServiceModel">Process Table</MadCap:conditionalText>
        </p>
        <table class="TableStyle-Process_Table" style="mc-table-style: url('../Resources/Stylesheets/TableStyles/Process_Table.css');margin-left: 0;margin-right: auto;caption-side: top;" cellspacing="0">
            <col class="Column-Column1" />
            <col class="Column-Column2" />
            <col class="Column-Column3" />
            <thead>
                <tr class="Head-Header1" MadCap:conditions="PM-MM Conditionals.ServiceModel">
                    <td class="HeadE-Column1-Header1">
                        <p class="CellHeading">Entity...</p>
                    </td>
                    <td class="HeadE-Column2-Header1">
                        <p class="CellHeading">Location...</p>
                    </td>
                    <td class="HeadD-Column3-Header1">
                        <p class="CellHeading">Operation (min)...</p>
                    </td>
                </tr>
            </thead>
            <tbody>
                <tr class="Body-Body1" MadCap:conditions="PM-MM Conditionals.ServiceModel">
                    <td class="BodyE-Column1-Body1">
                        <p class="CellBody">Truck</p>
                    </td>
                    <td class="BodyE-Column2-Body1">
                        <p class="CellBody">Bay_1</p>
                    </td>
                    <td class="BodyD-Column3-Body1">
                        <p class="CellBody">If Att1=0 Then Wait 60</p>
                        <p class="CellBody">Else Wait Att1</p>
                    </td>
                </tr>
                <tr class="Body-Body2" MadCap:conditions="PM-MM Conditionals.ServiceModel">
                    <td class="BodyE-Column1-Body2">
                        <p class="CellBody">Truck *</p>
                    </td>
                    <td class="BodyE-Column2-Body2">
                        <p class="CellBody">Bay_1</p>
                    </td>
                    <td class="BodyD-Column3-Body2">
                        <p class="CellBody">Att1=TimeLeft()</p>
                    </td>
                </tr>
                <tr class="Body-Body3" MadCap:conditions="PM-MM Conditionals.ServiceModel">
                    <td class="BodyB-Column1-Body3">
                        <p class="CellBody">Truck</p>
                    </td>
                    <td class="BodyB-Column2-Body3">
                        <p class="CellBody">Holding</p>
                    </td>
                    <td class="BodyA-Column3-Body3">
                        <p class="CellBody">&#160;</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p class="_rules" MadCap:conditions="PM-MM Conditionals.MedModel">
            <MadCap:conditionalText MadCap:conditions="PM-MM Conditionals.MedModel">
                <MadCap:conditionalText MadCap:conditions="PM-MM Conditionals.MedModel">Process Table</MadCap:conditionalText>
            </MadCap:conditionalText>
        </p>
        <table class="TableStyle-Process_Table" style="mc-table-style: url('../Resources/Stylesheets/TableStyles/Process_Table.css');margin-left: 0;margin-right: auto;caption-side: top;" cellspacing="0">
            <col class="Column-Column1" />
            <col class="Column-Column2" />
            <col class="Column-Column3" />
            <thead>
                <tr class="Head-Header1" MadCap:conditions="PM-MM Conditionals.MedModel">
                    <td class="HeadE-Column1-Header1">
                        <p class="CellHeading">Entity...</p>
                    </td>
                    <td class="HeadE-Column2-Header1">
                        <p class="CellHeading">Location...</p>
                    </td>
                    <td class="HeadD-Column3-Header1">
                        <p class="CellHeading">Operation (min)...</p>
                    </td>
                </tr>
            </thead>
            <tbody>
                <tr class="Body-Body1" MadCap:conditions="PM-MM Conditionals.MedModel">
                    <td class="BodyE-Column1-Body1">
                        <p class="CellBody">Patient</p>
                    </td>
                    <td class="BodyE-Column2-Body1">
                        <p class="CellBody">Exam1</p>
                    </td>
                    <td class="BodyD-Column3-Body1">
                        <p class="CellBody">If Att1=0 Then Wait 10</p>
                        <p class="CellBody">Else Wait Att1</p>
                    </td>
                </tr>
                <tr class="Body-Body2" MadCap:conditions="PM-MM Conditionals.MedModel">
                    <td class="BodyE-Column1-Body2">
                        <p class="CellBody">Patient *</p>
                    </td>
                    <td class="BodyE-Column2-Body2">
                        <p class="CellBody">Exam1</p>
                    </td>
                    <td class="BodyD-Column3-Body2">
                        <p class="CellBody">Att1=TimeLeft()</p>
                    </td>
                </tr>
                <tr class="Body-Body3" MadCap:conditions="PM-MM Conditionals.MedModel">
                    <td class="BodyB-Column1-Body3">
                        <p class="CellBody">Patient</p>
                    </td>
                    <td class="BodyB-Column2-Body3">
                        <p class="CellBody">Wait_Rm</p>
                    </td>
                    <td class="BodyA-Column3-Body3">
                        <p class="CellBody">&#160;</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p class="_rules" MadCap:conditions="PM-MM Conditionals.ProModel">Process Table</p>
        <table class="TableStyle-Process_Table" style="mc-table-style: url('../Resources/Stylesheets/TableStyles/Process_Table.css');margin-left: 0;margin-right: auto;caption-side: top;" cellspacing="0">
            <col class="Column-Column1" />
            <col class="Column-Column2" />
            <col class="Column-Column3" />
            <thead>
                <tr class="Head-Header1" MadCap:conditions="PM-MM Conditionals.ProModel">
                    <td class="HeadE-Column1-Header1">
                        <p class="CellHeading">Entity...</p>
                    </td>
                    <td class="HeadE-Column2-Header1">
                        <p class="CellHeading">Location...</p>
                    </td>
                    <td class="HeadD-Column3-Header1">
                        <p class="CellHeading">Operation (min)...</p>
                    </td>
                </tr>
            </thead>
            <tbody>
                <tr class="Body-Body1" MadCap:conditions="PM-MM Conditionals.ProModel">
                    <td class="BodyE-Column1-Body1">
                        <p class="CellBody">Gear</p>
                    </td>
                    <td class="BodyE-Column2-Body1">
                        <p class="CellBody">Lathe1</p>
                    </td>
                    <td class="BodyD-Column3-Body1">
                        <p class="CellBody">If Att1=0 Then Wait 10</p>
                        <p class="CellBody">Else Wait Att1</p>
                    </td>
                </tr>
                <tr class="Body-Body2" MadCap:conditions="PM-MM Conditionals.ProModel">
                    <td class="BodyE-Column1-Body2">
                        <p class="CellBody">Gear *</p>
                    </td>
                    <td class="BodyE-Column2-Body2">
                        <p class="CellBody">Lathe1</p>
                    </td>
                    <td class="BodyD-Column3-Body2">
                        <p class="CellBody">Att1=TimeLeft()</p>
                    </td>
                </tr>
                <tr class="Body-Body3" MadCap:conditions="PM-MM Conditionals.ProModel">
                    <td class="BodyB-Column1-Body3">
                        <p class="CellBody">Gear</p>
                    </td>
                    <td class="BodyB-Column2-Body3">
                        <p class="CellBody">Wait_Area</p>
                    </td>
                    <td class="BodyA-Column3-Body3">
                        <p class="CellBody">&#160;</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p class="p">* Preemptive Process Record</p>
        <p class="_rules" MadCap:conditions="PM-MM Conditionals.ServiceModel">
            <MadCap:conditionalText MadCap:conditions="PM-MM Conditionals.ServiceModel">Routing Table</MadCap:conditionalText>
        </p>
        <table class="TableStyle-Process_Table" style="mc-table-style: url('../Resources/Stylesheets/TableStyles/Process_Table.css');margin-left: 0;margin-right: auto;caption-side: top;" cellspacing="0">
            <col class="Column-Column1" />
            <col class="Column-Column2" />
            <col class="Column-Column3" />
            <col class="Column-Column4" />
            <col class="Column-Column1" />
            <thead>
                <tr class="Head-Header1" MadCap:conditions="PM-MM Conditionals.ServiceModel">
                    <td class="HeadE-Column1-Header1">
                        <p class="CellHeading">Blk</p>
                    </td>
                    <td class="HeadE-Column2-Header1">
                        <p class="CellHeading">Output...</p>
                    </td>
                    <td class="HeadE-Column3-Header1">
                        <p class="CellHeading">Destination...</p>
                    </td>
                    <td class="HeadE-Column4-Header1">
                        <p class="CellHeading">Rule...</p>
                    </td>
                    <td class="HeadD-Column1-Header1">
                        <p class="CellHeading">Move Logic...</p>
                    </td>
                </tr>
            </thead>
            <tbody>
                <tr class="Body-Body1" MadCap:conditions="PM-MM Conditionals.ServiceModel">
                    <td class="BodyE-Column1-Body1">
                        <p class="CellBody">1</p>
                    </td>
                    <td class="BodyE-Column2-Body1">
                        <p class="CellBody">Truck</p>
                    </td>
                    <td class="BodyE-Column3-Body1">
                        <p class="CellBody">Bay_2</p>
                    </td>
                    <td class="BodyE-Column4-Body1">
                        <p class="CellBody">First 1</p>
                    </td>
                    <td class="BodyD-Column1-Body1">
                        <p class="CellBody">&#160;</p>
                    </td>
                </tr>
                <tr class="Body-Body2" MadCap:conditions="PM-MM Conditionals.ServiceModel">
                    <td class="BodyE-Column1-Body2">
                        <p class="CellBody">1</p>
                    </td>
                    <td class="BodyE-Column2-Body2">
                        <p class="CellBody">Truck</p>
                    </td>
                    <td class="BodyE-Column3-Body2">
                        <p class="CellBody">Holding</p>
                    </td>
                    <td class="BodyE-Column4-Body2">
                        <p class="CellBody">First 1</p>
                    </td>
                    <td class="BodyD-Column1-Body2">
                        <p class="CellBody">&#160;</p>
                    </td>
                </tr>
                <tr class="Body-Body3" MadCap:conditions="PM-MM Conditionals.ServiceModel">
                    <td class="BodyB-Column1-Body3">
                        <p class="CellBody">1</p>
                    </td>
                    <td class="BodyB-Column2-Body3">
                        <p class="CellBody">Truck</p>
                    </td>
                    <td class="BodyB-Column3-Body3">
                        <p class="CellBody">Bay_1,99</p>
                    </td>
                    <td class="BodyB-Column4-Body3">
                        <p class="CellBody">First 1</p>
                    </td>
                    <td class="BodyA-Column1-Body3">
                        <p class="CellBody">&#160;</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p class="_rules" MadCap:conditions="PM-MM Conditionals.MedModel">
            <MadCap:conditionalText MadCap:conditions="PM-MM Conditionals.MedModel">
                <MadCap:conditionalText MadCap:conditions="PM-MM Conditionals.MedModel">Routing Table</MadCap:conditionalText>
            </MadCap:conditionalText>
        </p>
        <table class="TableStyle-Process_Table" style="mc-table-style: url('../Resources/Stylesheets/TableStyles/Process_Table.css');margin-left: 0;margin-right: auto;caption-side: top;" cellspacing="0">
            <col class="Column-Column1" />
            <col class="Column-Column2" />
            <col class="Column-Column3" />
            <col class="Column-Column4" />
            <col class="Column-Column1" />
            <thead>
                <tr class="Head-Header1" MadCap:conditions="PM-MM Conditionals.MedModel">
                    <td class="HeadE-Column1-Header1">
                        <p class="CellHeading">Blk</p>
                    </td>
                    <td class="HeadE-Column2-Header1">
                        <p class="CellHeading">Output...</p>
                    </td>
                    <td class="HeadE-Column3-Header1">
                        <p class="CellHeading">Destination...</p>
                    </td>
                    <td class="HeadE-Column4-Header1">
                        <p class="CellHeading">Rule...</p>
                    </td>
                    <td class="HeadD-Column1-Header1">
                        <p class="CellHeading">Move Logic...</p>
                    </td>
                </tr>
            </thead>
            <tbody>
                <tr class="Body-Body1" MadCap:conditions="PM-MM Conditionals.MedModel">
                    <td class="BodyE-Column1-Body1">
                        <p class="CellBody">1</p>
                    </td>
                    <td class="BodyE-Column2-Body1">
                        <p class="CellBody">Patient</p>
                    </td>
                    <td class="BodyE-Column3-Body1">
                        <p class="CellBody">Clinic2</p>
                    </td>
                    <td class="BodyE-Column4-Body1">
                        <p class="CellBody">First 1</p>
                    </td>
                    <td class="BodyD-Column1-Body1">
                        <p class="CellBody">&#160;</p>
                    </td>
                </tr>
                <tr class="Body-Body2" MadCap:conditions="PM-MM Conditionals.MedModel">
                    <td class="BodyE-Column1-Body2">
                        <p class="CellBody">1</p>
                    </td>
                    <td class="BodyE-Column2-Body2">
                        <p class="CellBody">Patient</p>
                    </td>
                    <td class="BodyE-Column3-Body2">
                        <p class="CellBody">Wait_Rm</p>
                    </td>
                    <td class="BodyE-Column4-Body2">
                        <p class="CellBody">First 1</p>
                    </td>
                    <td class="BodyD-Column1-Body2">
                        <p class="CellBody">&#160;</p>
                    </td>
                </tr>
                <tr class="Body-Body3" MadCap:conditions="PM-MM Conditionals.MedModel">
                    <td class="BodyB-Column1-Body3">
                        <p class="CellBody">1</p>
                    </td>
                    <td class="BodyB-Column2-Body3">
                        <p class="CellBody">Patient</p>
                    </td>
                    <td class="BodyB-Column3-Body3">
                        <p class="CellBody">Exam1, 99</p>
                    </td>
                    <td class="BodyB-Column4-Body3">
                        <p class="CellBody">First 1</p>
                    </td>
                    <td class="BodyA-Column1-Body3">
                        <p class="CellBody">&#160;</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p class="_rules" MadCap:conditions="PM-MM Conditionals.ProModel">Routing Table</p>
        <table class="TableStyle-Process_Table" style="mc-table-style: url('../Resources/Stylesheets/TableStyles/Process_Table.css');margin-left: 0;margin-right: auto;caption-side: top;" cellspacing="0">
            <col class="Column-Column1" />
            <col class="Column-Column2" />
            <col class="Column-Column3" />
            <col class="Column-Column4" />
            <col class="Column-Column1" />
            <thead>
                <tr class="Head-Header1" MadCap:conditions="PM-MM Conditionals.ProModel">
                    <td class="HeadE-Column1-Header1">
                        <p class="CellHeading">Blk</p>
                    </td>
                    <td class="HeadE-Column2-Header1">
                        <p class="CellHeading">Output...</p>
                    </td>
                    <td class="HeadE-Column3-Header1">
                        <p class="CellHeading">Destination...</p>
                    </td>
                    <td class="HeadE-Column4-Header1">
                        <p class="CellHeading">Rule...</p>
                    </td>
                    <td class="HeadD-Column1-Header1">
                        <p class="CellHeading">Move Logic...</p>
                    </td>
                </tr>
            </thead>
            <tbody>
                <tr class="Body-Body1" MadCap:conditions="PM-MM Conditionals.ProModel">
                    <td class="BodyE-Column1-Body1">
                        <p class="CellBody">1</p>
                    </td>
                    <td class="BodyE-Column2-Body1">
                        <p class="CellBody">Gear</p>
                    </td>
                    <td class="BodyE-Column3-Body1">
                        <p class="CellBody">Lathe2</p>
                    </td>
                    <td class="BodyE-Column4-Body1">
                        <p class="CellBody">First 1</p>
                    </td>
                    <td class="BodyD-Column1-Body1">
                        <p class="CellBody">&#160;</p>
                    </td>
                </tr>
                <tr class="Body-Body2" MadCap:conditions="PM-MM Conditionals.ProModel">
                    <td class="BodyE-Column1-Body2">
                        <p class="CellBody">1</p>
                    </td>
                    <td class="BodyE-Column2-Body2">
                        <p class="CellBody">Gear</p>
                    </td>
                    <td class="BodyE-Column3-Body2">
                        <p class="CellBody">Wait_Area</p>
                    </td>
                    <td class="BodyE-Column4-Body2">
                        <p class="CellBody">First 1</p>
                    </td>
                    <td class="BodyD-Column1-Body2">
                        <p class="CellBody">&#160;</p>
                    </td>
                </tr>
                <tr class="Body-Body3" MadCap:conditions="PM-MM Conditionals.ProModel">
                    <td class="BodyB-Column1-Body3">
                        <p class="CellBody">1</p>
                    </td>
                    <td class="BodyB-Column2-Body3">
                        <p class="CellBody">Gear</p>
                    </td>
                    <td class="BodyB-Column3-Body3">
                        <p class="CellBody">Lathe1, 99</p>
                    </td>
                    <td class="BodyB-Column4-Body3">
                        <p class="CellBody">First 1</p>
                    </td>
                    <td class="BodyA-Column1-Body3">
                        <p class="CellBody">&#160;</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p class="_rules">See Also</p>
        <p class="p">
            <MadCap:xref class="lowercase_no_see" href="C-07-PreemptionProcessLogic.htm#C-07_3886599965_1089500" target="" title="" alt="">Preemption Process Logic on page 1</MadCap:xref>.</p>
    </body>
</html>